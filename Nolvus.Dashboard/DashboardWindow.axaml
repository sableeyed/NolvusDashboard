<Window
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="clr-namespace:Nolvus.Components.Controls;assembly=Nolvus.Components"
    x:Class="Nolvus.Dashboard.DashboardWindow"
    Width="1200" Height="800"
    CanResize="True"
    SystemDecorations="None"
    ExtendClientAreaToDecorationsHint="True"
    ExtendClientAreaTitleBarHeightHint="50"
    Background="#363636">

  <!-- Resources (keyed objects like brushes go here) -->
  <Window.Resources>
    <SolidColorBrush x:Key="AccentBrush" Color="#F28F1A"/>
  </Window.Resources>

  <!-- Styles (selector-based; no x:Key) -->
  <Window.Styles>
    <!-- Apply to TextBlock with class 'primary' -->
    <Style Selector="TextBlock.primary">
      <Setter Property="Foreground" Value="White"/>
      <Setter Property="FontWeight" Value="Medium"/>
    </Style>

    <!-- Apply to TextBlock with class 'secondary' -->
    <Style Selector="TextBlock.secondary">
      <Setter Property="Foreground" Value="#CCCCCC"/>
    </Style>
  </Window.Styles>

  <Border Background="#363636">
    <Grid RowDefinitions="Auto,*,Auto,Auto">

      <!-- TITLE BAR -->
      <Grid Grid.Row="0" Background="#363636" Height="50">
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="*" />
          <ColumnDefinition Width="Auto" />
          <ColumnDefinition Width = "Auto" />
          <ColumnDefinition Width = "Auto" />
        </Grid.ColumnDefinitions>

        <controls:TitleBarControl x:Name="TitleBarControl"
                                  Grid.Column="0"
                                  VerticalAlignment="Center"
                                  Margin="6,0" />

        <!-- <controls:TitleBarControl.PointerPressed>
          <PointerPressedEventHandler>TitleBar_PointerPressed</PointerPressedEventHandler>
        </controls:TitleBarControl.PointerPressed>
         -->
      </Grid>
      <!-- MAIN CONTENT HOST -->
      <Border Grid.Row="1" Margin="0,0,0,32" Background="#2E2E2E">
        <StackPanel>
          <!-- Status Label (replaces LblStatus) -->
          <TextBlock x:Name="LblStatus"
                     Classes="primary"
                     Text="Initializing..."
                     FontSize="14"
                     Margin="12,8,0,8"
                     IsVisible="False"/>
          <!-- Main frame host -->
          <ContentPresenter x:Name="ContentHost"/>
        </StackPanel>
      </Border>

      <!-- PROGRESS BAR -->
      <ProgressBar x:Name="DashboardProgressBar"
                   Grid.Row="2"
                   Minimum="0"
                   Maximum="100"
                   Height="6"
                   HorizontalAlignment="Stretch"
                   Background="#222"
                   Foreground="{StaticResource AccentBrush}"
                   Margin="0"/>

      <!-- STATUS STRIP -->
      <Border Grid.Row="3" Background="#2C2C2C" Height="32">
        <DockPanel LastChildFill="False">

          <!-- Left status info -->
          <StackPanel Orientation="Horizontal" DockPanel.Dock="Left" Margin="8,0" VerticalAlignment="Center">
            <TextBlock x:Name="StStripLblInfo" Classes="primary" IsVisible="False" Margin="0,0,12,0"/>
            <TextBlock x:Name="StStripLblAdditionalInfo" Classes="primary" Margin="0,0,12,0"/>
            <TextBlock x:Name="StStripLblAdditionalInfo2" Classes="primary" Margin="0,0,12,0"/>
            <TextBlock x:Name="StStripLblAdditionalInfo3" Classes="primary"/>
          </StackPanel>

          <!-- Right status info -->
          <StackPanel Orientation="Horizontal" DockPanel.Dock="Right" Margin="8,0" VerticalAlignment="Center" Spacing="12">
            <TextBlock x:Name="StripLblAccountType" Foreground="{StaticResource AccentBrush}"/>
            <TextBlock x:Name="StripLblNexus" Foreground="{StaticResource AccentBrush}"/>
            <TextBlock x:Name="StripLblScaling" Classes="secondary"/>
          </StackPanel>

        </DockPanel>
      </Border>

      <!-- LOADING OVERLAY -->
      <Grid x:Name="LoadingOverlay"
            IsVisible="False"
            Grid.RowSpan="4"
            Background="#80000000">
        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="12">
          <ProgressBar IsIndeterminate="True" Width="320" Height="8"/>
          <TextBlock Text="Loadingâ€¦" Classes="primary" HorizontalAlignment="Center"/>
        </StackPanel>
      </Grid>

    </Grid>
  </Border>
</Window>
